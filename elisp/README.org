* Leisure connection mode for Emacs
This is a minor mode that connects an emacs buffer to Leisure web page.

*NOTE: LEISURE CURRENTLY ONLY RUNS IN CHROMIUM-BASED BROWSERS (LIKE CHROME).*

*If you are viewing this in Emacs*, you can try this out by [[elisp:leisure-connection-mode][CLICKING
THIS LINK]] and then switching to your newly opened browser page (if it
doesn't automatically switch you to the browser).
* Bidirectional connection to Emacs
Leisure is an editable, web-based computing environment that uses
orgmode format and it can hook up to Emacs.

Toggling leisure-connection-mode will open and close a web page associated with
the current buffer.

You can also initiate connections from Leisure to emacs, provided that
you have started Emacs' Leisure service.  Leisure-connection-mode
automatically turns on the service but you can also control it with
the leisure-start and leisure-stop commands.
* Work in progress
Leisure is a *work in progress* and it's *not hardened* or ready for
unforgiving users yet, but that doesn't necessarily mean you can't use
it.  You can edit in Emacs and keep a Leisure browser next ot it to
see your formatted changes.  You can use Leisure's features, like
interactive widgets, value sliders, etc.  They just change the
document text which Leisure then sends to Emacs.  If Leisure gets
messed up, you can either reload the page yourself, use the
[[elisp:leisure-reload]] command, or close and reopen the page.  Leisure
will connect right back to your Emacs buffer.  Also, since Leisure's
just sending text to Emacs, you can use Emacs' fabulous undo support
if you use Leisure to make a change and it somehow messes up.
* Code syntax highlighting
Leisure uses [[http://prismjs.com/][Prism]] to highlight syntax as you type.  Here's an
example:

#+BEGIN_SRC cs
# Some CoffeeScript
@maluba = (x)-> x + 52
#+END_SRC
* Source and slides
- You can click the martini glass to view/edit orgmode source
- You can use the toolar to start a slideshow using top-level headlines as slides
* Themes
- You can choose themes in the Leisure toolbar
- You can set a default theme in the Emacs [[elisp:(customize-group-other-window "leisure")][leisure customize group]]
* Views
Leisure uses Handlebars to define HTML views for different types of data.
This is what it uses for its normal display (called "fancy mode").
- You can tweak Leisure's rendering by overriding parts of [[elisp:(browse-url-emacs "http://textcraft.org/newLeisure/src/defaults.lorg")][defaults.lorg]] in your document
* HTML templates
#+NAME: fred
This is Fred.  The Html snippet below displays Fred's name and the
name's length.  Change it to see the HTML below update.
#+BEGIN_SRC yaml
name: Fred
#+END_SRC

Here's some Html that uses Fred and Fred's controller.

#+BEGIN_HTML :var __proto__=fred :controller fred-controller
<b>Hello {{name}}</b>
Name length: <b name='len'></b>
#+END_HTML

#+NAME: fred-controller
This is Fred's controller
#+BEGIN_SRC cs
@initializeView = (view, data)->
  $(view).find('[name=len]').html data.name.length
#+END_SRC
* View definitions
[[leisure:rotator]] [[leisure:rotator/two]]

Leisure has a presentation system that can display a "view" on data
according to its "type" field.  You can nest views and even define
alternate views on the same type of data.

Leisure uses this presentation system to display its own documents and
you can redefine how Leisure displays its document parts in the
documents themselves.  It's so meta.

#+NAME: rotator
This YAML data controls the rotating square above.
- Click the degrees value and move the slider that pops up
- When you let go of the sider, it snaps to the middle so the value can keep changing
- Watch it update in both Emacs and Leisure
- You can edit the value in Emacs and it will update in Leisure
#+BEGIN_SRC yaml 
type: rotator
degrees: 90
#+END_SRC

#+BEGIN_SRC html :defview rotator
<div style='padding: 25px; display: inline-block'>
  <div style='transform: rotate({{degrees}}deg);height: 100px;width: 100px;background: green'></div>
</div>
#+END_SRC

#+BEGIN_SRC html :defview rotator/two
<div style='padding: 25px; padding-left: 100px; display: inline-block'>
  <div style='transform-origin: 5px 100px; transform: rotate(calc(90deg - {{degrees}}deg));height: 100px;width: 10px;background: red'></div>
</div>
#+END_SRC
* Collaboration
The old version of Leisure has collaboration and the new version will
also, but it will take a more peer-to-peer approach (coming soon).
* Media
It's the web.  You can has media.

[[https://imgs.xkcd.com/comics/lisp_cycles.png]]

Here is a nice video by John Kitchin about Orgmode

#+BEGIN_HTML
<iframe width="420" height="315" src="https://www.youtube.com/embed/fgizHHd7nOo" frameborder="0" allowfullscreen></iframe>
#+END_HTML
* Babel stuff
If you are connecte to Emacs and have access to plantuml and dita, you
can change these diagrams and the pictures will update in Leisure.

#+BEGIN_src plantuml :file /tmp/plantuml-example.svg :exports results
skinparam monochrome true
FitsHdu <|-- PrimaryHdu
FitsHdu <|-- ExtensionHdu

FitsHdu : header
Fitshdu : getHeaderKeyword()

ExtensionHdu <|-- ImageHdu
ImageHdu : image
ImageHdu : getPixel(row, column)

ExtensionHdu <|-- BinaryTableHdu
BinaryTableHdu : table
BinaryTableHdu : getRow(row)
BinaryTableHdu : getColumn(column)
#+END_src

#+BEGIN_SRC ditaa :file /tmp/ditaa-seqboxes.png :exports results
+------+   +-----+   +-----+   +-----+
|{io}  |   |{d}  |   |{s}  |   |cBLU |
| Foo  +---+ Bar +---+ Baz +---+ Moo |
|      |   |     |   |     |   |     |
+------+   +-----+   +--+--+   +-----+
                        |
           /-----\      |      +------+
           |     |      |      | c1AB |
           | Goo +------+---=--+ Shoo |
           \-----/             |      |
                               +------+
#+END_SRC
* Hidden slides
There are some hidden settings.  Click Show/Hide at the top to show and hide them.
* Settings
:properties:
:hidden: true
:end:
#+STARTUP: showeverything
