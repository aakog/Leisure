// Generated by CoffeeScript 1.10.0
(function() {
  var Nil, addDateStats, addStats, booleanFor, cons, consFrom, defaultEnv, fs, ref, requirejs, root;

  requirejs = require('requirejs');

  defaultEnv = (root = module.exports = requirejs('base')).defaultEnv;

  ref = requirejs('ast'), consFrom = ref.consFrom, Nil = ref.Nil, cons = ref.cons;

  booleanFor = requirejs('runtime').booleanFor;

  fs = require('fs');

  defaultEnv.readFile = function(fileName, cont) {
    return fs.readFile(fileName, {
      encoding: 'utf8'
    }, cont);
  };

  defaultEnv.writeFile = function(fileName, data, cont) {
    return fs.writeFile(fileName, data, {
      encoding: 'utf8'
    }, cont);
  };

  defaultEnv.readDir = function(fileName, cont) {
    return fs.readdir(fileName, function(err, files) {
      if (!err) {
        files = consFrom(files);
      }
      return cont(err, files);
    });
  };

  addStats = function(name, stats, result) {
    return cons(cons(name, booleanFor(stats[name]())), result);
  };

  addDateStats = function(name, stats, result) {
    return cons(cons(name, stats[name].getTime()), result);
  };

  defaultEnv.statFile = function(fileName, cont) {
    return fs.stat(fileName, function(err, stats) {
      var res;
      if (!err) {
        res = Nil;
        res = addStats('isBlockDevice', stats, res);
        res = addStats('isCharacterDevice', stats, res);
        res = addStats('isFIFO', stats, res);
        res = addStats('isSocket', stats, res);
        res = addStats('isSymbolicLink', stats, res);
        res = addStats('isFile', stats, res);
        res = addStats('isDirectory', stats, res);
        res = addDateStats('atime', stats, res);
        res = addDateStats('mtime', stats, res);
        res = addDateStats('ctime', stats, res);
        return cont(err, res);
      } else {
        return cont(err, null);
      }
    });
  };

  defaultEnv.statDir = function(fileName, cont) {
    return fs.stat(fileName, cont);
  };

}).call(this);

//# sourceMappingURL=node.js.map
